<md-dialog class="clientForm-modal">
	<form name="clientForm">
		<md-toolbar>
			<div class="md-toolbar-tools">
				<h2>{{ctrl.formTitle}}</h2>
				<span flex></span>
				<md-button class="md-icon-button" ng-click="ctrl.close()">
					&times;
				</md-button>
			</div>
		</md-toolbar>

		<md-dialog-content>
			<div class="md-dialog-content">
				<div layout-gt-sm="row">
					<md-input-container class="md-block" flex-gt-sm>
						<label>ID</label>
						<input required name="clientId" ng-model="ctrl.data.clientId" maxlength="10" ng-pattern="/^[a-zA-Z0-9_]+$/">
						<div ng-messages="(clientForm.$submitted || clientForm.clientId.$touched) && clientForm.clientId.$error">
							<div ng-message="required">This is required.</div>
							<div ng-message="pattern">ID can contain _ and alphanumeric characters.</div>
						</div>
					</md-input-container>
					<md-input-container class="md-block" flex-gt-sm>
						<label>Name</label>
						<input required name="clientName" ng-model="ctrl.data.name" maxlength="50">
						<div ng-messages="(clientForm.$submitted || clientForm.clientName.$touched) && clientForm.clientName.$error">
							<div ng-message="required">This is required.</div>
						</div>
					</md-input-container>
				</div>
				<div layout-gt-sm="row">
					<md-input-container class="md-block" flex-gt-sm>
						<label>Email</label>
						<input required type="email" name="clientEmail" ng-model="ctrl.data.emailId" ng-pattern="/^.+@.+\..+$/" maxlength="50" />

						<div ng-messages="(clientForm.$submitted || clientForm.clientEmail.$touched) && clientForm.clientEmail.$error" role="alert">
							<div ng-message-exp="['required', 'minlength', 'maxlength', 'pattern']">
								Enter a valid e-mail address.
							</div>
						</div>
					</md-input-container>
					<md-input-container class="md-block" flex-gt-sm>
						<label>Phone</label>
						<input required type="text" name="clientPhone" ng-model="ctrl.data.telephoneNumber" ng-pattern="/^[0-9]{10}$/" maxlength="10"
						/>

						<div ng-messages="(clientForm.$submitted || clientForm.clientPhone.$touched) && clientForm.clientPhone.$error" role="alert">
							<div ng-message-exp="['required', 'pattern']">
								Enter a valid phone number.
							</div>
						</div>
					</md-input-container>
				</div>
				<div layout-gt-sm="row">
					<md-input-container class="md-block" flex-gt-sm>
						<label>Address Line 1</label>
						<input type="text" name="clientaddr1" ng-model="ctrl.data.addressLine1" md-maxlength="50" maxlength="50" />
					</md-input-container>
					<md-input-container class="md-block" flex-gt-sm>
						<label>Address Line 2</label>
						<input type="text" name="clientaddr2" ng-model="ctrl.data.addressLine2" md-maxlength="50" maxlength="50" />
					</md-input-container>
				</div>
				<div layout-gt-sm="row">
					<md-input-container class="md-block" flex-gt-sm>
						<label>Country</label>
						<md-select ng-model="ctrl.data.country" name="clientCountry" placeholder="Country" ng-change="ctrl.onCountryChange()">
							<md-option ng-repeat="cntry in ctrl.countryList" value="{{cntry.country}}">{{cntry.country}}</md-option>
						</md-select>
					</md-input-container>
					<md-input-container class="md-block" flex-gt-sm ng-if="!ctrl.isStateSelectable">
						<label>State</label>
						<input type="text" name="clientState" ng-model="ctrl.data.state" ng-pattern="/^[a-zA-Z]+$/" maxlength="30" />
						<div ng-messages="(clientForm.$submitted || clientForm.clientState.$touched) && clientForm.clientState.$error" role="alert">
							<div ng-message="pattern">
								Special characters not allowed.
							</div>
						</div>
					</md-input-container>
					<md-input-container class="md-block" flex-gt-sm ng-if="ctrl.isStateSelectable">
						<label>State</label>
						<md-select ng-if="ctrl.isStateSelectable" ng-model="ctrl.data.state" name="clientState" placeholder="State">
							<md-option ng-repeat="state in ctrl.statesList" value="{{state}}">{{state}}</md-option>
						</md-select>
					</md-input-container>
				</div>
				<div layout-gt-sm="row">
					<md-input-container class="md-block" flex-gt-sm>
						<label>City</label>
						<input type="text" name="clientCity" ng-model="ctrl.data.city" ng-pattern="/^[a-zA-Z]+$/" maxlength="30" />
						<div ng-messages="(clientForm.$submitted || clientForm.clientCity.$touched) && clientForm.clientCity.$error" role="alert">
							<div ng-message="pattern">
								Special characters not allowed.
							</div>
						</div>
					</md-input-container>
					<md-input-container class="md-block" flex-gt-sm>
						<label>Postal Code</label>
						<input type="text" ng-pattern="/^[0-9]+$/" name="clientPostalCode" ng-model="ctrl.data.postalCode" maxlength="10" />
						<div ng-messages="(clientForm.$submitted || clientForm.clientPostalCode.$touched) && clientForm.clientPostalCode.$error"
						 role="alert">
							<div ng-message-exp="['pattern']">
								Enter a valid postal code.
							</div>
						</div>
					</md-input-container>
				</div>
			</div>
		</md-dialog-content>

		<md-dialog-actions layout="row">
			<md-button data-dismiss="modal" ng-click="ctrl.clearForm(clientForm)" class="md-raised md-default">
				<i class="fa fa-eraser"> </i> Clear
			</md-button>
			<span flex></span>
			<md-button data-dismiss="modal" ng-click="ctrl.addClient(clientForm)" class="md-raised md-primary">
				<i class="fa fa-floppy-o"> </i> Submit
			</md-button>
			<md-button data-dismiss="modal" ng-click="ctrl.close()" class="md-raised md-secondary">
				<i class="fa fa-times"> </i> Cancel
			</md-button>
		</md-dialog-actions>
	</form>
</md-dialog>