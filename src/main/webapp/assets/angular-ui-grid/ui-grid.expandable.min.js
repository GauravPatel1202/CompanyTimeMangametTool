/*!
 * ui-grid - v4.4.9 - 2018-04-30
 * Copyright (c) 2018 ; License: MIT 
 */


!function(){"use strict";var e=angular.module("ui.grid.expandable",["ui.grid"]);e.service("uiGridExpandableService",["gridUtil","$compile",function(n,e){var i={initializeGrid:function(o){o.expandable={},o.expandable.expandedAll=!1,o.options.enableExpandable=!1!==o.options.enableExpandable,o.options.showExpandAllButton=!1!==o.options.showExpandAllButton,o.options.expandableRowHeight=o.options.expandableRowHeight||150,o.options.expandableRowHeaderWidth=o.options.expandableRowHeaderWidth||40,o.options.enableExpandable&&!o.options.expandableRowTemplate&&(n.logError("You have not set the expandableRowTemplate, disabling expandable module"),o.options.enableExpandable=!1);var e={events:{expandable:{rowExpandedBeforeStateChanged:function(e,n){},rowExpandedStateChanged:function(e,n){}}},methods:{expandable:{toggleRowExpansion:function(e){var n=o.getRow(e);null!==n&&i.toggleRowExpansion(o,n)},expandAllRows:function(){i.expandAllRows(o)},collapseAllRows:function(){i.collapseAllRows(o)},toggleAllRows:function(){i.toggleAllRows(o)},expandRow:function(e){var n=o.getRow(e);null===n||n.isExpanded||i.toggleRowExpansion(o,n)},collapseRow:function(e){var n=o.getRow(e);null!==n&&n.isExpanded&&i.toggleRowExpansion(o,n)},getExpandedRows:function(){return i.getExpandedRows(o).map(function(e){return e.entity})}}}};o.api.registerEventsFromObject(e.events),o.api.registerMethodsFromObject(e.methods)},toggleRowExpansion:function(e,n){e.api.expandable.raise.rowExpandedBeforeStateChanged(n),n.isExpanded=!n.isExpanded,angular.isUndefined(n.expandedRowHeight)&&(n.expandedRowHeight=e.options.expandableRowHeight),n.isExpanded?(n.height=n.grid.options.rowHeight+n.expandedRowHeight,e.expandable.expandedAll=i.getExpandedRows(e).length===e.rows.length):(n.height=n.grid.options.rowHeight,e.expandable.expandedAll=!1),e.api.expandable.raise.rowExpandedStateChanged(n)},expandAllRows:function(n){n.renderContainers.body.visibleRowCache.forEach(function(e){e.isExpanded||e.entity.subGridOptions&&e.entity.subGridOptions.disableRowExpandable||i.toggleRowExpansion(n,e)}),n.expandable.expandedAll=!0,n.queueGridRefresh()},collapseAllRows:function(n){n.renderContainers.body.visibleRowCache.forEach(function(e){e.isExpanded&&i.toggleRowExpansion(n,e)}),n.expandable.expandedAll=!1,n.queueGridRefresh()},toggleAllRows:function(e){e.expandable.expandedAll?i.collapseAllRows(e):i.expandAllRows(e)},getExpandedRows:function(e){return e.rows.filter(function(e){return e.isExpanded})}};return i}]),e.directive("uiGridExpandable",["uiGridExpandableService","$templateCache",function(d,t){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,o,i){if(d.initializeGrid(i.grid),i.grid.options.enableExpandable&&!1!==i.grid.options.enableExpandableRowHeader){var a={name:"expandableButtons",displayName:"",exporterSuppressExport:!0,enableColumnResizing:!1,enableColumnMenu:!1,width:i.grid.options.expandableRowHeaderWidth||40};a.cellTemplate=t.get("ui-grid/expandableRowHeader"),a.headerCellTemplate=t.get("ui-grid/expandableTopRowHeader"),i.grid.addRowHeaderColumn(a,-90)}},post:function(e,n,o,i){}}}}}]),e.directive("uiGrid",["uiGridExpandableService","$templateCache",function(e,n){return{replace:!0,priority:599,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,o,i){i.grid.api.core.on.renderingComplete(e,function(){e.row&&e.row.grid&&e.row.grid.options&&e.row.grid.options.enableExpandable&&(i.grid.parentRow=e.row)})},post:function(e,n,o,i){}}}}}]),e.directive("uiGridExpandableRow",["uiGridExpandableService","$timeout","$compile","uiGridConstants","gridUtil","$interval","$log",function(e,n,t,o,i,a,d){return{replace:!1,priority:0,scope:!1,compile:function(){return{pre:function(a,d,e,n){i.getTemplate(a.grid.options.expandableRowTemplate).then(function(e){if(a.grid.options.expandableRowScope){var n=a.grid.options.expandableRowScope;for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])}var i=angular.element(e);d.append(i),i=t(i)(a),a.row.expandedRendered=!0})},post:function(e,n,o,i){e.$on("$destroy",function(){e.row.expandedRendered=!1})}}}}}]),e.directive("uiGridRow",["$compile","gridUtil","$templateCache",function(e,n,o){return{priority:-200,scope:!1,compile:function(e,n){return{pre:function(e,n,o,i){e.grid.options.enableExpandable&&(e.expandableRow={},e.expandableRow.shouldRenderExpand=function(){return"body"===e.colContainer.name&&!1!==e.grid.options.enableExpandable&&e.row.isExpanded&&(!e.grid.isScrollingVertically||e.row.expandedRendered)},e.expandableRow.shouldRenderFiller=function(){return e.row.isExpanded&&("body"!==e.colContainer.name||e.grid.isScrollingVertically&&!e.row.expandedRendered)})},post:function(e,n,o,i){}}}}}]),e.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function(e,n,d){return{priority:-200,scope:!1,compile:function(e,n){var o=angular.element(e.children().children()[0]),i=d.get("ui-grid/expandableScrollFiller"),a=d.get("ui-grid/expandableRow");return o.append(a),o.append(i),{pre:function(e,n,o,i){},post:function(e,n,o,i){}}}}}])}();